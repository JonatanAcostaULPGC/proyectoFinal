<app-header [isModal]="true" [title]="product? 'Actualizar producto' : 'Agregar Producto'"></app-header>
<ion-content>
    <form [formGroup]="form" class="ion-padding ion-text-center" (ngSubmit)="submit()" (keypress.enter)="submit()">

        <ion-avatar *ngIf="form.value.image">
            <img [src]="form.value.image" />
        </ion-avatar>

        <ion-icon class="image-icon" *ngIf="!form.value.image" name="image-outline"></ion-icon>
        
        
        <br>
        <ion-button (click)="takeImage()" size="small" shape="round">
            Tomar/Seleccionar
        </ion-button>

        <app-custom-input
          autocomplete="name"
          [control]="form.controls.name"
          type="text"
          label="Nombre"
        ></app-custom-input>
  
        <div class="validators" *ngIf="form.controls.name.errors && form.controls.name.touched">
          <div *ngIf="form.controls.name.errors?.['required']">El campo es obligatorio</div>
          <div *ngIf="form.controls.name.errors?.['minLenght']">El nombre debe tener al menos 2 caracteres</div>
        </div>

        <app-custom-input
          autocomplete="Fecha"
          [control]="form.controls.date"
          type="date"
          label="Fecha de caducidad"
        ></app-custom-input>
  
        <div class="validators" *ngIf="form.controls.date.errors && form.controls.date.touched">
          <div *ngIf="form.controls.date.errors?.['required']">El campo es obligatorio</div>
          <div *ngIf="form.controls.date.errors?.['min']">La fecha no puede ser nula</div>
        </div>
        
        <!-- Unidades -->
        <app-custom-input
          autocomplete="Cantidad"
          [control]="form.controls.units"
          type="number"
          label="Cantidad"
        ></app-custom-input>
  
        <div class="validators" *ngIf="form.controls.units.errors && form.controls.units.touched">
          <div *ngIf="form.controls.units.errors?.['required']">El campo es obligatorio</div>
          <div *ngIf="form.controls.units.errors?.['min']">El mínimo es 0</div>
        </div>

        <!-- Unidades -->
        <ng-container *ngIf="product">
          <ion-item>
            <ion-select 
              formControlName="showInList" 
              placeholder="Seleccionar" 
              label="Mostrar en la lista sugerida">
              <ion-select-option [value]="true">Sí</ion-select-option>
              <ion-select-option [value]="false">No</ion-select-option>
            </ion-select>
          </ion-item>
          
        </ng-container>     
        
          
        <ion-button  mode="ios" class="ion-margin" type="submit" [disabled]="form.invalid">
          {{product? 'Actualizar' : 'Agregar'}}
          <ion-icon slot="end" name="checkmark-circle-outline"></ion-icon>
        </ion-button>
  
      </form>
</ion-content>